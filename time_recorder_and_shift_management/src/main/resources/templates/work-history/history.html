<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity6">

<head>
	<meta charset="utf-8">
	<title>勤怠履歴</title>
	<link rel="stylesheet" th:href="@{/css/mystyle.css}">
	<meta name="viewport" content="width=device-width">
</head>

<body>
	<header>
		<nav class="nav-history-admin">
			<ul th:with="thisMonth=${#dates.month(#dates.createNow())}">
				<div th:each="month:${#numbers.sequence(1,thisMonth)}" class="display-inline">
					<li><a th:href="@{/work-history/{month}(month=${month})}" th:text="|${month}月|"></a></li>
				</div>
				<li class="li-index">
					<!--					<a th:href="@{#}" onclick="history.back()">戻る</a>-->
					<a th:href="@{/{from}(from=${from})}">戻る</a>
				</li>
			</ul>
			<ul th:if="${from}=='admin'">
				<li><a th:href="@{/work-history/{target-month}(target-month=${targetMonth})}">全員</a></li>
				<div th:each="employee : ${employees}" class="display-inline">
					<li><a th:href="@{/work-history/{target-month}/{employee-id}(target-month=${targetMonth},employee-id=${employee.employeeId})}"
							th:text="${employee.name}"></a></li>
				</div>
			</ul>
		</nav>
	</header>
	<article>
		<h1>勤怠履歴</h1>
		<p th:if="${message}" th:text="${message}" class="message">完了メッセージ</p>
		<p th:if="${errorMessage}" th:text="${errorMessage}" class="error-message">エラーメッセージ</p>
		<table class="history">
			<thead>
				<tr>
					<th>日付</th>
					<th>曜日</th>
					<th>名前</th>
					<th>出勤時刻</th>
					<th>退勤時刻</th>
					<th>実働時間</th>
					<th sec:authorize="hasAuthority('ADMIN')">作成日時</th>
					<th sec:authorize="hasAuthority('ADMIN')">更新日時</th>
					<th sec:authorize="hasAuthority('ADMIN')">修正</th>
				</tr>
			</thead>
			<tbody>
				<tr th:each="history:${histories}">
					<th:block th:object="${history}">
						<td th:text="*{#temporals.format(date,'MM/dd')}"></td>
						<td th:text="*{#temporals.dayOfWeekNameShort(date)}"></td>
						<td th:text="*{employee.name}"></td>
						<td th:text="*{start}"></td>
						<td th:text="*{end}"></td>
						<td th:text="*{workTime}"></td>
						<td sec:authorize="hasAuthority('ADMIN')"
							th:text="*{#temporals.format(created_at,'yyyy-MM-dd hh:mm:ss')}"></td>
						<td sec:authorize="hasAuthority('ADMIN')"
							th:text="*{#temporals.format(updated_at,'yyyy-MM-dd hh:mm:ss')}"></td>
						<td sec:authorize="hasAuthority('ADMIN')"><a
								th:href="@{/work-history/edit/{shift-id}(shift-id=*{shiftId})}">修正</a></td>
					</th:block>
				</tr>
			</tbody>
		</table>
	</article>
</body>

</html>